<!-- app/views/products/index.html.erb -->
<main class="container my-4">
  <h2>Products</h2>
  <div class="mb-3">
    <%= link_to 'On Sale', products_path(on_sale: true), class: 'btn btn-primary' %>
    <%= link_to 'New Products', products_path(new: true), class: 'btn btn-primary' %>
    <%= link_to 'Recently Updated', products_path(recently_updated: true), class: 'btn btn-primary' %>
  </div>
  
  <!-- Search Section -->
  <h2>Search Products</h2>
  <%= search_form_for @q, url: products_path, method: :get, html: { class: 'form-inline' } do |f| %>
    <div class="form-group">
      <%= f.label :category_name_cont, 'Category:' %>
      <%= f.search_field :categories_name_cont, class: 'form-control', placeholder: 'Search by category' %>
    </div>
    <div class="form-group">
      <%= f.submit 'Search', class: 'btn btn-primary' %>
    </div>
  <% end %>
  
  <!-- Display Products -->
  <ul class="list-unstyled">
    <% @products.each do |product| %>
      <li class="media mb-4">
        <%= image_tag product.image_url, alt: product.name, size: "100x100", class: "mr-3" %>
        <div class="media-body">
          <h5 class="mt-0 mb-1">
            <%= link_to product.name, product_path(product) %>
          </h5>
          <p><%= number_to_currency(product.price) %></p>
        </div>
      </li>
    <% end %>
  </ul>
  
  <!-- Pagination -->
  <%= paginate @products %>
</main>
